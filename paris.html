<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paris - Wikipedia</title>
    <style>
        :root {
            --background-color: #ffffff;
            --text-color: #000000;
            --border-color: #a2a9b1;
            --link-color: #0645ad;
            --visited-link-color: #0b0080;
            --hover-background: #f8f9fa;
            --chat-user-bg: #e6f3ff;
            --chat-bot-bg: #f0f0f0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Lato', 'Helvetica', 'Arial', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            margin: 0;
            padding: 0;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .dark-mode {
            --background-color: #000000;
            --text-color: #ffffff;
            --border-color: #555555;
            --link-color: #8cb4ff;
            --visited-link-color: #c97fff;
            --hover-background: #333333;
            --chat-user-bg: #1a3d5c;
            --chat-bot-bg: #2c2c2c;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .logo {
            display: flex;
            align-items: center;
        }

        .logo img {
            width: 50px;
            height: 50px;
            margin-right: 10px;
        }

        .search-container {
            display: flex;
            align-items: center;
        }

        .search-input {
            padding: 5px 10px;
            border: 1px solid var(--border-color);
            border-right: none;
            border-radius: 2px 0 0 2px;
        }

        .search-button {
            padding: 5px 10px;
            background-color: var(--background-color);
            color: var(--text-color);
            border: 1px solid var(--border-color);
            border-left: none;
            border-radius: 0 2px 2px 0;
            cursor: pointer;
        }

        nav {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }

        nav ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
            display: flex;
        }

        nav ul li {
            margin-right: 20px;
        }

        nav ul li a {
            text-decoration: none;
            color: var(--link-color);
        }

        main {
            display: flex;
            margin-top: 20px;
        }

        .sidebar {
            width: 200px;
            padding-right: 20px;
        }

        .content {
            flex-grow: 1;
        }

        h1 {
            margin-top: 0;
        }

        a {
            color: var(--link-color);
            text-decoration: none;
        }

        a:visited {
            color: var(--visited-link-color);
        }

        a:hover {
            text-decoration: underline;
        }

        .language-dropdown {
            margin-top: 10px;
        }

        .infobox {
            float: right;
            width: 300px;
            border: 1px solid var(--border-color);
            padding: 10px;
            margin-left: 20px;
            margin-bottom: 20px;
        }

        .infobox img {
            max-width: 100%;
            height: auto;
        }

        #darkModeToggle {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 24px;
        }

        #chatbot {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 300px;
            height: 400px;
            border: 1px solid var(--border-color);
            border-radius: 10px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            background-color: var(--background-color);
            display: none;
            z-index: 999;
        }

        #chatHeader {
            background-color: var(--link-color);
            color: white;
            padding: 10px;
            font-weight: bold;
        }

        #chatMessages {
            flex-grow: 1;
            overflow-y: auto;
            padding: 10px;
        }

        .message {
            margin-bottom: 10px;
            padding: 8px 12px;
            border-radius: 20px;
            max-width: 80%;
        }

        .user-message {
            background-color: var(--chat-user-bg);
            align-self: flex-end;
            margin-left: auto;
        }

        .bot-message {
            background-color: var(--chat-bot-bg);
            align-self: flex-start;
        }

        #chatInput {
            display: flex;
            padding: 10px;
        }

        #userInput {
            flex-grow: 1;
            padding: 5px;
            border: 1px solid var(--border-color);
            border-radius: 3px;
        }

        #sendMessage {
            margin-left: 10px;
            padding: 5px 10px;
            background-color: var(--link-color);
            color: white;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }

        #chatbot.open {
            display: flex;
        }

        #toggleChat {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--link-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 24px;
            cursor: pointer;
            z-index: 1000;
        }

        @media (max-width: 768px) {
            main {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                padding-right: 0;
                margin-bottom: 20px;
            }

            .infobox {
                float: none;
                width: 100%;
                margin-left: 0;
            }

            #chatbot {
                width: 100%;
                height: 50vh;
                right: 0;
                bottom: 0;
                border-radius: 0;
            }
            #toggleChat {
                bottom: 10px;
                right: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <img src="https://upload.wikimedia.org/wikipedia/en/thumb/8/80/Wikipedia-logo-v2.svg/1200px-Wikipedia-logo-v2.svg.png" alt="Wikipedia Logo">
                <span>Wikipedia</span>
            </div>
            <div class="search-container">
                <input type="text" class="search-input" placeholder="Search Wikipedia">
                <button class="search-button">Search</button>
            </div>
            <button id="darkModeToggle">🌓</button>
        </header>
        <nav>
            <ul>
                <li><a href="#" class="active">Article</a></li>
                <li><a href="#">Talk</a></li>
            </ul>
            <ul>
                <li><a href="#">Read</a></li>
                <li><a href="#">View source</a></li>
                <li><a href="#">View history</a></li>
            </ul>
        </nav>
        <main>
            <aside class="sidebar">
                <h3>Contents</h3>
                <ul id="tableOfContents">
                    <!-- Table of contents will be dynamically populated -->
                </ul>
            </aside>
            <div class="content">
                <h1>Paris</h1>
                <div class="language-dropdown">
                    <select id="languageSelect">
                        <option value="en">English</option>
                        <option value="fr">Français</option>
                        <option value="es">Español</option>
                        <option value="de">Deutsch</option>
                    </select>
                    276 languages
                </div>
                <div class="infobox">
                    <h2>Paris</h2>
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4b/La_Tour_Eiffel_vue_de_la_Tour_Saint-Jacques%2C_Paris_ao%C3%BBt_2014_%282%29.jpg/1280px-La_Tour_Eiffel_vue_de_la_Tour_Saint-Jacques%2C_Paris_ao%C3%BBt_2014_%282%29.jpg" alt="Paris skyline">
                    <p><strong>Capital city, commune, and department</strong></p>
                    <!-- Add more infobox content here -->
                </div>
                <div id="articleContent">
                    <!-- Article content will be dynamically populated -->
                </div>
            </div>
        </main>
    </div>
    <div id="chatbot">
        <div id="chatHeader">Paris Chatbot</div>
        <div id="chatMessages"></div>
        <div id="chatInput">
            <input type="text" id="userInput" placeholder="Ask about Paris...">
            <button id="sendMessage">Send</button>
        </div>
    </div>
    <button id="toggleChat" aria-label="Toggle chat">💬</button>
    <script>
        // Fetch Wikipedia content
        async function fetchWikipediaContent() {
            try {
                const response = await fetch('https://en.wikipedia.org/api/rest_v1/page/summary/Paris');
                const data = await response.json();
                document.getElementById('articleContent').innerHTML = `
                    <p>${data.extract}</p>
                `;
                generateTableOfContents();
            } catch (error) {
                console.error('Error fetching Wikipedia content:', error);
                document.getElementById('articleContent').innerHTML = '<p>Error loading content. Please try again later.</p>';
            }
        }

        // Generate table of contents
        function generateTableOfContents() {
            const headings = document.querySelectorAll('.content h2, .content h3');
            const toc = document.getElementById('tableOfContents');
            headings.forEach((heading, index) => {
                const li = document.createElement('li');
                const a = document.createElement('a');
                a.textContent = heading.textContent;
                a.href = `#section${index}`;
                heading.id = `section${index}`;
                li.appendChild(a);
                toc.appendChild(li);
            });
        }

        // Dark mode toggle
        const darkModeToggle = document.getElementById('darkModeToggle');
        darkModeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            darkModeToggle.textContent = document.body.classList.contains('dark-mode') ? '☀️' : '🌓';
        });

        // Language selector
        document.getElementById('languageSelect').addEventListener('change', (e) => {
            alert(`Changing language to ${e.target.value}. This feature is not implemented in this demo.`);
        });

        // Chatbot functionality
        const chatMessages = document.getElementById('chatMessages');
        const userInput = document.getElementById('userInput');
        const sendMessage = document.getElementById('sendMessage');

        sendMessage.addEventListener('click', handleUserInput);
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                handleUserInput();
            }
        });

        async function handleUserInput() {
            const userMessage = userInput.value.trim();
            if (userMessage) {
                addMessage('user', userMessage);
                userInput.value = '';
                const botResponse = await generateBotResponse(userMessage);
                addMessage('bot', botResponse);
            }
        }

        function addMessage(sender, message) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('message', `${sender}-message`);
            messageElement.textContent = message;
            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        async function generateBotResponse(userMessage) {
            const lowerCaseMessage = userMessage.toLowerCase();
            if (lowerCaseMessage.includes('eiffel tower')) {
                return "The Eiffel Tower is a wrought-iron lattice tower on the Champ de Mars in Paris. It's named after engineer Gustave Eiffel and was constructed from 1887 to 1889 as the entrance arch to the 1889 World's Fair.";
            } else if (lowerCaseMessage.includes('population')) {
                return "As of 2021, the population of Paris is approximately 2.16 million people in the city proper, and over 12 million in the metropolitan area.";
            } else {
                try {
                    const response = await fetch('https://en.wikipedia.org/api/rest_v1/page/summary/Paris');
                    const data = await response.json();
                    return data.extract;
                } catch (error) {
                    console.error('Error fetching Wikipedia content:', error);
                    return "I'm sorry, I couldn't fetch the information at the moment. Please try again later.";
                }
            }
        }

        // Initialize
        fetchWikipediaContent();

        // Chatbot toggle functionality
        const toggleChat = document.getElementById('toggleChat');
        const chatbot = document.getElementById('chatbot');

        toggleChat.addEventListener('click', () => {
            chatbot.classList.toggle('open');
            toggleChat.setAttribute('aria-expanded', chatbot.classList.contains('open'));
        });

        // Close chatbot when clicking outside
        document.addEventListener('click', (event) => {
            if (!chatbot.contains(event.target) && !toggleChat.contains(event.target) && chatbot.classList.contains('open')) {
                
                chatbot.classList.remove('open');
                toggleChat.setAttribute('aria-expanded', 'false');
            }
        });

        // Initialize toggle button state
        toggleChat.setAttribute('aria-expanded', 'false');
    </script>
</body>
</html>